(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{770:function(e,t,a){Promise.resolve().then(a.bind(a,9036)),Promise.resolve().then(a.bind(a,6244)),Promise.resolve().then(a.t.bind(a,3222,23)),Promise.resolve().then(a.bind(a,4267)),Promise.resolve().then(a.bind(a,281)),Promise.resolve().then(a.bind(a,4323)),Promise.resolve().then(a.t.bind(a,2780,23))},1500:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(7437),n=a(2265),l=a(6691),r=a.n(l),o=a(2780),i=a.n(o)();function d(e){let{children:t,onClickClose:a,description:l="음식 추천의 전문가 foodie와 채팅을 해보세요!"}=e,o=(0,n.useRef)(null);return(0,s.jsx)("div",{className:"bg-black/5 h-full w-full z-30 flex fixed left-0 top-0 items-center justify-center",children:(0,s.jsxs)("div",{ref:o,className:"flex fixed flex-col w-[500px] h-[650px] bg-white shadow-[3px_3px_11px_0_rgba(0,0,0,0.1)] p-5 max-md:w-[348px] max-md:h-[540px] max-md:p-3",children:[(0,s.jsx)("div",{role:"presentation",className:"flex justify-end",onMouseDown:e=>(function(e){if(e.target!==e.currentTarget)return;let t=e.clientX,a=e.clientY,s=e=>{let s=t-e.clientX,n=a-e.clientY;t=e.clientX,a=e.clientY,o.current&&(o.current.style.top="".concat(o.current.offsetTop-n,"px"),o.current.style.left="".concat(o.current.offsetLeft-s,"px"))},n=()=>{document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",s)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",n)})(e),children:(0,s.jsx)(r(),{src:"/svg/close.svg",alt:"close",height:36,width:36,className:"hover:cursor-pointer",onClick:a})}),(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(r(),{src:"/svg/logo.svg",alt:"logo",width:26,height:26}),(0,s.jsx)("p",{className:"text-3xl max-md:text-1x1 text-main-theme ml-1 font-bold ".concat(i.className),children:"Chatfoodie"})]}),""===l?null:(0,s.jsx)("p",{className:"text-sm max-md:text-xs text-center",children:l})]}),(0,s.jsx)("div",{className:"flex flex-col grow",children:t})]})})}},4267:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(7437),n=a(6691),l=a.n(n),r=a(2265),o=a(1500);function i(e){let{label:t,type:a,name:n,placeholder:l,value:r,required:o=!1,error:i,message:d,disabled:m,onChange:c,onBlur:u,autoComplete:x}=e;return(0,s.jsxs)("label",{htmlFor:n,className:"flex flex-col w-80 max-md:w-64 mb-3",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-slate-700 max-md:text-xs ".concat(o?"after:content-['*'] after:ml-0.5 after:text-red-500":""),children:t}),(0,s.jsx)("input",{id:n,type:a,name:n,value:r,className:"mt-1 px-3 py-2 h-10 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-full rounded-md focus:ring-1 disabled:opacity-50 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",placeholder:l,onBlur:u,onChange:c,disabled:m,autoComplete:x}),d&&(0,s.jsx)("p",{className:"block text-xs text-slate-700 mt-1",children:d}),i&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i})]})}var d=a(9036),m=a(8814),c=a(9402),u=a(2068);function x(e){let{onClickClose:t}=e,{userId:a,userRole:n,needUpdate:l}=(0,r.useContext)(d.AuthContext),[x,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[w,v]=(0,r.useState)(""),[j,C]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[k,I]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),Z=()=>{h(!0),f("인증 코드 전송 중"),u.Z.post("/email-verifications").then(()=>{h(!1),f("인증 코드 전송 완료")}).catch(e=>{f(""),alert(e.response.data.errorMessage)})},L=async()=>{let e=!0;if(""===w.trim())C("이메일을 입력해주세요."),e=!1;else if(/^[\w.%+-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(w)){if(w.length>100)C("이메일은 최대 100자 이하여야 합니다."),e=!1;else try{w!==g&&(await u.Z.post("/validate/email",{email:w}),C(""))}catch(t){462===t.response.data.status&&(e=!1,C("이미 존재하는 이메일 입니다."))}}else C("올바른 이메일 주소를 입력해주세요."),e=!1;return e},_=()=>{let e=!0;return 6!==S.length?(e=!1,I("인증 코드는 6자리여야 합니다.")):/^\d{6}$/.test(S)?I(""):(e=!1,I("숫자만 입력하세요.")),e},D=async()=>{if(w===g){C("동일한 이메일로 변경할 수 없습니다");return}if(!await L()){alert("이메일 주소를 확인해 주세요");return}("ROLE_PENDING"===n||confirm("이메일 변경하면 인증하기 전까지 로그인할 수 없습니다.\n 변경하시겠습니까?"))&&u.Z.put("/users/".concat(a),{email:w}).then(e=>{b(w),N("이메일 변경 완료"),Z();let t=e.headers.authorization;(0,m.LJ)(t),l()})};return(0,r.useEffect)(()=>{u.Z.get("/users/".concat(a)).then(e=>{b(e.data.response.email),v(e.data.response.email)})},[a]),(0,s.jsx)(o.Z,{onClickClose:()=>{"ROLE_PENDING"===n&&(alert("로그아웃 됩니다."),(0,m.l6)(),l()),t()},children:(0,s.jsx)("div",{className:"p-5 h-0 grow",children:(0,s.jsx)("form",{className:"overflow-y-scroll custom-scroll-bar-10px max-h-full -mr-[10px]",onSubmit:e=>{e.preventDefault();let a={verificationCode:e.currentTarget.querySelector("[name='emailVerificationCode']").value};u.Z.post("/email-verifications/confirm",a).then(e=>{let a=e.headers.authorization;(0,m.LJ)(a),l(),t(),alert("인증이 완료되었습니다.")}).catch(e=>{400===e.response.data.status&&I("인증코드가 일치하지 않습니다.")})},children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"이메일 확인",type:"text",name:"email",placeholder:"변경할 이메일 주소를 입력해주세요.",value:w,onChange:e=>{(0,c.kT)(e,100),v(e.target.value),N("")},onBlur:()=>L(),error:j,message:y}),(0,s.jsx)("button",{type:"button",onClick:()=>D(),className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-80 h-12 mb-3 max-md:w-64 max-md:h-10 max-md:font-normal",children:"이메일 주소 변경"}),(0,s.jsxs)("div",{className:"flex flex-row w-80 space-x-2 max-md:w-64",children:[(0,s.jsx)(i,{label:"이메일 인증 코드",type:"text",name:"emailVerificationCode",placeholder:"인증 코드를 입력하세요(6자리)",onChange:e=>{(0,c.kT)(e,6),E(e.target.value)},onBlur:()=>_(),required:!0,value:S,error:k,message:p}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-1/3 h-10 mt-6 disabled:opacity-50 max-md:mt-5 max-md:font-normal max-md:h-9 max-md:text-sm",type:"button",disabled:x,onClick:Z,children:"재전송"})]}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-80 h-12 mb-3 max-md:w-64 max-md:h-10 max-md:font-normal",type:"submit",children:"이메일 인증하기"})]})})})})}function h(e){let{onClickClose:t,onClickJoin:a,onClickFindId:n,onClickFindPassword:l}=e,{needUpdate:x}=(0,r.useContext)(d.AuthContext),[h,p]=(0,r.useState)({loginId:"",password:""}),[f,g]=(0,r.useState)(""),b=e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))},w=()=>{let e=!0;return""===h.loginId.trim()&&(g("아이디를 입력해주세요."),e=!1),e},v=()=>{let e=!0;return""===h.password&&(g("비밀번호를 입력해주세요."),e=!1),e},j=async()=>!!(w()&&v()),C=async e=>{e.preventDefault(),await j()&&u.Z.post("/login",{loginId:h.loginId,password:h.password}).then(e=>{let a=e.headers.authorization;(0,m.LJ)(a),x(),t()}).catch(()=>{g("아이디 또는 비밀번호를 잘못 입력했습니다. 입력하신 내용을 다시 확인해주세요.")})};return(0,s.jsx)(o.Z,{onClickClose:t,children:(0,s.jsx)("div",{className:"p-5 h-0 grow",children:(0,s.jsx)("form",{className:"max-h-full",onSubmit:C,children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"아이디",type:"text",name:"loginId",placeholder:"아이디를 입력하세요",onChange:e=>{(0,c.kT)(e,40),b(e)},autoComplete:"username"}),(0,s.jsx)(i,{label:"비밀번호",type:"password",name:"password",placeholder:"비밀번호를 입력하세요",onChange:e=>{(0,c.kT)(e,64),b(e)},error:f,autoComplete:"current-password"}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold py-2 px-4 rounded w-80 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"submit",children:"로그인"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex mt-3",children:[(0,s.jsx)("p",{className:"max-md:text-xs mr-2",children:"계정이 없으신가요?"}),(0,s.jsx)("button",{type:"button",onClick:a,children:(0,s.jsx)("p",{className:"max-md:text-xs underline",children:"회원가입하기"})})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex mt-3 gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:n,children:(0,s.jsx)("p",{className:"max-md:text-xs underline",children:"아이디 찾기 "})}),(0,s.jsx)("button",{type:"button",onClick:l,children:(0,s.jsx)("p",{className:"max-md:text-xs underline",children:"비밀번호 초기화"})})]})})]})})})})}function p(e){let{onClickClose:t}=e,[a,n]=(0,r.useState)(1),[l,x]=(0,r.useState)(2e3),{needUpdate:h}=(0,r.useContext)(d.AuthContext),[p,f]=(0,r.useState)({loginId:"",password:"",passwordCheck:"",name:"",email:""}),[g,b]=(0,r.useState)({loginId:"",password:"",passwordCheck:"",name:"",email:""}),w=e=>{let{name:t,value:a}=e.target;f(e=>({...e,[t]:a}))},v=async()=>{let e={...g},t=!0;if(""===p.loginId.trim())e.loginId="아이디를 입력해주세요.",t=!1;else if(p.loginId.length<4||p.loginId.length>40)e.loginId="아이디는 최소 4자 이상 최대 40자 이하이어야 합니다.",t=!1;else if(/^[a-zA-Z0-9_.]+$/.test(p.loginId)){let a={loginId:p.loginId};try{await u.Z.post("/validate/loginId",a),e.loginId=""}catch(a){461===a.response.data.status&&(t=!1,e.loginId="이미 존재하는 아이디 입니다.")}}else e.loginId="영어, 숫자, _, . 만 가능합니다.",t=!1;return b(t=>({...t,loginId:e.loginId})),t},j=()=>{let e={...g},t=!0;return""===p.password?(e.password="비밀번호를 입력해주세요.",t=!1):p.password.length<8||p.password.length>64?(e.password="비밀번호는 최소 8자 이상 최대 64자 이하이어야 합니다.",t=!1):/^(?=.*[a-zA-Z])(?=.*[\d@#$%^&!])[a-zA-Z\d@#$%^&!]+$/.test(p.password)?e.password="":(e.password="영문, 숫자, 특수문자 중 최소 2종류를 포함해야 합니다.",t=!1),b(t=>({...t,password:e.password})),t},C=()=>{let e={...g},t=!0;return p.passwordCheck!==p.password?(e.passwordCheck="비밀번호가 일치하지 않습니다.",t=!1):e.passwordCheck="",b(t=>({...t,passwordCheck:e.passwordCheck})),t},y=()=>{let e={...g},t=!0;return p.name.length>40?(e.name="이름은 최대 40자 이하여야 합니다.",t=!1):e.name="",b(t=>({...t,name:e.name})),t},N=async()=>{let e={...g},t=!0;if(""===p.email.trim())e.email="이메일을 입력해주세요.",t=!1;else if(/^[\w.%+-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(p.email)){if(p.email.length>100)e.email="이메일은 최대 100자 이하여야 합니다.",t=!1;else{let a={email:p.email};try{await u.Z.post("/validate/email",a),e.email=""}catch(a){462===a.response.data.status&&(t=!1,e.email="이미 존재하는 이메일 입니다.")}}}else e.email="올바른 이메일 주소를 입력해주세요.",t=!1;return b(t=>({...t,email:e.email})),t},k=async()=>{let e=!0;return e=await v()&&e,e=j()&&e,e=C()&&e,e=y()&&e,e=await N()&&e};return(0,s.jsx)(o.Z,{onClickClose:t,children:(0,s.jsx)("div",{className:"p-5 h-0 grow max-md:p-3",children:(0,s.jsx)("form",{className:"overflow-y-scroll custom-scroll-bar-10px max-h-full -mr-[10px] max-md:custom-scroll-bar-4px max-md:-mr-[4px]",onSubmit:e=>{if(e.preventDefault(),!k()){alert("입력하신 정보를 확인해주세요");return}let a={};["loginId","password","passwordCheck","name","gender","birthYear","birthMonth","birthDay","email"].forEach(t=>{let s=e.currentTarget.querySelector("[name='".concat(t,"']"));s&&(a[t]=s.value)});let s="".concat(a.birthYear,"-").concat(a.birthMonth,"-").concat(a.birthDay);u.Z.post("/join",{loginId:a.loginId,password:a.password,passwordCheck:a.passwordCheck,name:a.name,gender:a.gender,birth:s,email:a.email}).then(e=>{let a=e.headers.authorization;(0,m.LJ)(a),h(),t(),u.Z.post("/email-verifications",void 0,{headers:{Authorization:a}}).then(()=>{}).catch(e=>{alert(e.response.data.errorMessage)})}).catch(e=>{switch(e.response.data.status){case 461:b(e=>({...e,loginId:"이미 존재하는 아이디 입니다."}));break;case 462:b(e=>({...e,email:"이미 존재하는 이메일 입니다."}))}})},children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"아이디",type:"text",name:"loginId",placeholder:"아이디를 입력하세요",onChange:e=>{(0,c.kT)(e,40),w(e)},onBlur:()=>v(),required:!0,error:g.loginId,autoComplete:"username"}),(0,s.jsx)(i,{label:"비밀번호",type:"password",name:"password",placeholder:"비밀번호를 입력하세요",required:!0,onChange:e=>{(0,c.kT)(e,64),w(e)},onBlur:()=>j(),error:g.password,autoComplete:"current-password"}),(0,s.jsx)(i,{label:"비밀번호 확인",type:"password",name:"passwordCheck",placeholder:"비밀번호를 입력하세요",required:!0,onChange:e=>{(0,c.kT)(e,64),w(e)},onBlur:()=>C(),error:g.passwordCheck}),(0,s.jsx)(i,{label:"이메일",type:"text",name:"email",placeholder:"example@domain.com",required:!0,onChange:e=>{(0,c.kT)(e,100),w(e)},onBlur:()=>N(),error:g.email,autoComplete:"email"}),(0,s.jsx)(i,{label:"이름",type:"text",name:"name",placeholder:"이름을 입력하세요",onChange:e=>{(0,c.kT)(e,40),w(e)},onBlur:()=>y(),error:g.name,autoComplete:"name"}),(0,s.jsxs)("label",{htmlFor:"gender",className:"block w-80 mb-3 max-md:w-64",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-slate-700 max-md:text-xs",children:"성별"}),(0,s.jsxs)("select",{id:"gender",name:"gender",className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-full rounded-md focus:ring-1 max-md:text-sm max-md:px-2 max-md:py-1.5",children:[(0,s.jsx)("option",{value:"false",children:"남성"}),(0,s.jsx)("option",{value:"true",children:"여성"})]})]}),(0,s.jsxs)("label",{htmlFor:"birthDay",className:"block w-80 mb-3 max-md:w-64",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-slate-700 max-md:text-xs",children:"생년월일"}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-1",children:[(0,s.jsx)("select",{id:"birthYear",name:"birthYear",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block rounded-md focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",placeholder:"년도",value:l,onChange:e=>x(parseInt(e.target.value,10)),children:(0,c.Zj)()}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"년"}),(0,s.jsxs)("select",{id:"birthMonth",name:"birthMonth",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-1/3 rounded-md focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",value:a,onChange:e=>n(parseInt(e.target.value,10)),children:[(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"3",children:"3"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"5",children:"5"}),(0,s.jsx)("option",{value:"6",children:"6"}),(0,s.jsx)("option",{value:"7",children:"7"}),(0,s.jsx)("option",{value:"8",children:"8"}),(0,s.jsx)("option",{value:"9",children:"9"}),(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"11",children:"11"}),(0,s.jsx)("option",{value:"12",children:"12"})]}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"월"}),(0,s.jsx)("select",{id:"birthDay",name:"birthDay",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-1/3 rounded-md focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",children:(0,c.DD)(l,a)}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"일"})]})]}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-80 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"submit",children:"회원가입"})]})})})})}function f(e){let{label:t,value:a}=e;return(0,s.jsxs)("div",{className:"w-full min-h-[45px] h-auto flex items-center",children:[(0,s.jsx)("div",{className:"text-right pr-4 basis-1/4 font-bold",children:(0,s.jsx)("p",{children:t})}),(0,s.jsx)("div",{className:"basis-3/4 pl-4 flex flex-wrap break-keep",children:(0,s.jsx)("p",{children:a})})]})}function g(e){let{onClickClose:t,onClickEditEmail:a,onClickEditProfile:n}=e,[l,i]=(0,r.useState)({loginId:"",name:"",email:"",gender:"",birth:"",favors:""});return(0,r.useEffect)(()=>{u.Z.get("/users/".concat((0,m.sk)())).then(e=>{let{response:t}=e.data,a=t.favors.map(e=>e.foodName).join(", ");i({loginId:t.loginId,name:t.name,email:t.email,gender:t.gender?"여성":"남성",birth:t.birth,favors:a||"없음"})})},[]),(0,s.jsx)(o.Z,{onClickClose:t,description:"",children:(0,s.jsxs)("div",{className:"p-4 relative h-full flex flex-col mt-6 max-md:text-sm max-md:p-3 max-md:mt-0",children:[(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)(f,{label:"아이디",value:l.loginId}),(0,s.jsx)(f,{label:"이름",value:l.name}),(0,s.jsx)(f,{label:"이메일",value:l.email}),(0,s.jsx)(f,{label:"성별",value:l.gender}),(0,s.jsx)(f,{label:"생년월일",value:l.birth}),(0,s.jsx)(f,{label:"선호 음식",value:l.favors})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{type:"button",className:"bg-orange-400 hover:bg-main-theme text-white font-semibold rounded p-2 mr-5 h-12 max-md:h-10 max-md:font-normal",onClick:()=>{a(),t()},children:"이메일 변경"}),(0,s.jsx)("button",{type:"button",className:"bg-orange-400 hover:bg-main-theme text-white font-semibold rounded p-2 h-12 max-md:h-10 max-md:font-normal",onClick:()=>{n(),t()},children:"회원정보 수정"})]})]})})}function b(e){let{isOpened:t,setIsOpened:a,setPreferenceModalOpened:n,setProfileModalOpened:o}=e,{userId:i,needUpdate:c}=(0,r.useContext)(d.AuthContext),x=(0,r.useRef)(null),h=()=>{confirm("정말로 탈퇴하시겠습니까? \n탈퇴 시 모든 정보가 삭제됩니다. \n삭제된 정보는 복구할 수 없습니다.")&&u.Z.delete("/users/".concat(i)).then(()=>{(0,m.l6)(),c(),alert("탈퇴되었습니다.")}).catch(e=>{alert(e.response.data.errorMessage)})};return(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[t,a]),(0,s.jsx)("div",{className:"absolute top-[52px] right-9 max-md:top-9 max-md:right-4 w-[180px] max-lg:w-[160px] z-20 py-2 rounded bg-gray-200 transition-all duration-300 ".concat(t?"opacity-100 visible":"opacity-0 invisible -translate-y-[4%]"),ref:x,children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("button",{type:"button",className:"flex flex-row gap-4 items-center justify-center text-sm text-center font-bold w-full h-[36px] p-3 min-h-[40px] hover:bg-gray-300 transition-all duration-300",onClick:()=>{o(!0),a(!1)},children:[(0,s.jsx)(l(),{className:"shrink-0",src:"/svg/user_without_bg.svg",alt:"user_without_bg",width:16,height:16,style:{height:"16px"}}),(0,s.jsx)("div",{className:"grow text-left",children:"회원정보"})]}),(0,s.jsxs)("button",{type:"button",className:"flex flex-row gap-4 items-center justify-center text-sm text-center font-bold w-full h-[36px] p-3 min-h-[40px] hover:bg-gray-300 transition-all duration-300",onClick:()=>{n(!0),a(!1)},children:[(0,s.jsx)(l(),{className:"shrink-0",src:"/svg/edit.svg",alt:"edit",width:16,height:16}),(0,s.jsx)("div",{className:"grow text-left",children:"선호 음식 변경"})]}),(0,s.jsxs)("button",{type:"button",className:"flex flex-row gap-4 items-center justify-center text-sm text-center font-bold w-full h-[36px] p-3 min-h-[40px] hover:bg-gray-300 transition-all duration-300",onClick:()=>{u.Z.post("/logout").then(()=>{(0,m.l6)(),c()}),a(!1)},children:[(0,s.jsx)(l(),{className:"shrink-0",src:"/svg/logout.svg",alt:"logout",width:16,height:16}),(0,s.jsx)("div",{className:"grow text-left",children:"로그아웃"})]}),(0,s.jsxs)("button",{type:"button",className:"flex flex-row gap-4 items-center justify-center text-sm text-center font-bold w-full h-[36px] p-3 min-h-[40px] hover:bg-red-200 hover:text-red-500 transition-all duration-300",onClick:()=>{h()},children:[(0,s.jsxs)("svg",{className:"stroke-current ",width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M1 3H1.9L19 3",stroke:"current",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M3 3V17.1176C3 17.5882 3.02412 18.0855 3.43686 18.5294C3.87372 18.9993 4.3125 19 4.75 19C6.15 19 12.3333 19 15.25 19C15.6869 19 16.1237 19 16.5619 18.5294C17 18.0588 17 17.5882 17 17.1176C17 15.6118 17 7.07843 17 3",stroke:"current",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M7 8L13 14",stroke:"current",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M13 8L7 14",stroke:"current",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M13 2C13 1.8042 12.931 1.49339 12.7119 1.27024C12.558 1.11349 12.3301 1 12 1C11.2 1 9 1 8 1C7.79265 1 7.45631 1.07739 7.2317 1.32846C7.09523 1.481 7 1.69765 7 2",stroke:"current",strokeWidth:"2"})]}),(0,s.jsx)("div",{className:"grow text-left",children:"회원 탈퇴"})]})]})})}function w(e){let{onClickClose:t,setUserName:a}=e,{userId:n,needUpdate:l}=(0,r.useContext)(d.AuthContext),[m,x]=(0,r.useState)(2e3),[h,p]=(0,r.useState)(1),[f,g]=(0,r.useState)(1),[b,w]=(0,r.useState)({loginId:"",password:"",passwordCheck:"",name:""}),[v,j]=(0,r.useState)({loginId:"",password:"",passwordCheck:"",name:"",gender:"false",birthDate:""}),[C,y]=(0,r.useState)({loginId:"",password:"",passwordCheck:"",name:"",gender:"false",birthDate:""}),N=e=>{let{name:t,value:a}=e.target;y(e=>({...e,[t]:a}))},k=e=>{let{name:t,value:a}=e.target;y(e=>({...e,[t]:a}))},I=async()=>{let e={...b},t=!0;if(""===C.loginId.trim())e.loginId="";else if(C.loginId.length<4||C.loginId.length>40)e.loginId="아이디는 최소 4자 이상 최대 40자 이하이어야 합니다.",t=!1;else if(/^[a-zA-Z0-9_.]+$/.test(C.loginId)){let a={loginId:C.loginId};try{v.loginId!==C.loginId&&(await u.Z.post("/validate/loginId",a),e.loginId="")}catch(a){461===a.response.data.status&&(t=!1,e.loginId="이미 존재하는 아이디 입니다.")}}else e.loginId="영어, 숫자, _, . 만 가능합니다.",t=!1;return w(t=>({...t,loginId:e.loginId})),t},S=()=>{let e={...b},t=!0;return""===C.password?e.password="":C.password.length<8||C.password.length>64?(e.password="비밀번호는 최소 8자 이상 최대 64자 이하이어야 합니다.",t=!1):/^(?=.*[a-zA-Z])(?=.*[\d@#$%^&!])[a-zA-Z\d@#$%^&!]+$/.test(C.password)?e.password="":(e.password="영문, 숫자, 특수문자 중 최소 2종류를 포함해야 합니다.",t=!1),w(t=>({...t,password:e.password})),t},E=()=>{let e={...b},t=!0;return C.passwordCheck!==C.password?(e.passwordCheck="비밀번호가 일치하지 않습니다.",t=!1):e.passwordCheck="",w(t=>({...t,passwordCheck:e.passwordCheck})),t},Z=()=>{let e={...b},t=!0;return 0===C.password.length?e.password="":C.name.length>40?(e.name="이름은 최대 40자 이하여야 합니다.",t=!1):e.name="",w(t=>({...t,name:e.name})),t},L=async()=>{let e=!0;return e=await I()&&e,e=S()&&e,e=E()&&e,e=Z()&&e},_=()=>{let e={loginId:null,password:null,passwordCheck:null,name:null,gender:null,birth:null,email:null},t="".concat(m,"-").concat(h,"-").concat(f);return""!==C.loginId&&v.loginId!==C.loginId&&(e.loginId=C.loginId),""!==C.password&&v.password!==C.password&&(e.password=C.password,e.passwordCheck=C.passwordCheck),""!==C.name&&v.name!==C.name&&(e.name=C.name),v.gender!==C.gender&&(e.gender=C.gender),v.birthDate!==t&&(e.birth=t),e},D=e=>{if(e.preventDefault(),!L()){alert("입력하신 정보를 확인해주세요");return}if(0!==n){let e=_();u.Z.put("/users/".concat(n),e).then(()=>{alert("수정이 완료되었습니다"),t(),l(),u.Z.get("/users/".concat(n)).then(e=>{a(e.data.response.name)})}).catch(e=>{alert(e.response.data.errorMessage)})}};return(0,r.useEffect)(()=>{0!==n&&u.Z.get("/users/".concat(n)).then(e=>{j({loginId:e.data.response.loginId,password:"",passwordCheck:"",name:e.data.response.name,gender:e.data.response.gender,birthDate:e.data.response.birth}),y({loginId:e.data.response.loginId,password:"",passwordCheck:"",name:e.data.response.name,gender:e.data.response.gender,birthDate:e.data.response.birth});let{birth:t}=e.data.response;x(parseInt(t.split("-")[0],10)),p(parseInt(t.split("-")[1],10)),g(parseInt(t.split("-")[2],10))})},[n]),(0,s.jsx)(o.Z,{onClickClose:t,description:"변경하고 싶은 정보를 입력 후 버튼을 눌러주세요",children:(0,s.jsx)("div",{className:"p-5 h-0 grow",children:(0,s.jsx)("form",{className:"overflow-y-scroll custom-scroll-bar-10px max-h-full -mr-[10px] max-md:custom-scroll-bar-4px max-md:-mr-[4px]",onSubmit:e=>{D(e)},children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"아이디",type:"text",name:"loginId",placeholder:"아이디를 입력하세요",value:C.loginId,onChange:e=>{(0,c.kT)(e,40),N(e)},onBlur:()=>I(),error:b.loginId}),(0,s.jsx)(i,{label:"비밀번호",type:"password",name:"password",value:C.password,placeholder:"비밀번호를 입력하세요",onChange:e=>{(0,c.kT)(e,64),N(e)},onBlur:()=>S(),error:b.password}),(0,s.jsx)(i,{label:"비밀번호 확인",type:"password",name:"passwordCheck",value:C.passwordCheck,placeholder:"비밀번호를 입력하세요",onChange:e=>{(0,c.kT)(e,64),N(e)},onBlur:()=>E(),error:b.passwordCheck}),(0,s.jsx)(i,{label:"이름",type:"text",name:"name",value:C.name,placeholder:"이름을 입력하세요",onChange:e=>{(0,c.kT)(e,40),N(e)},onBlur:()=>Z(),error:b.name}),(0,s.jsxs)("label",{htmlFor:"gender",className:"block w-80 mb-3 max-md:w-64",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-slate-700 max-md:text-xs",children:"성별"}),(0,s.jsxs)("select",{name:"gender",value:C.gender,onChange:e=>k(e),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-full rounded-md sm:text-sm focus:ring-1 max-md:text-sm max-md:px-2 max-md:py-1.5",children:[(0,s.jsx)("option",{value:"false",children:"남성"}),(0,s.jsx)("option",{value:"true",children:"여성"})]})]}),(0,s.jsxs)("label",{htmlFor:"birthDate",className:"block w-80 mb-3 max-md:w-64",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-slate-700 max-md:text-xs",children:"생년월일"}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-1",children:[(0,s.jsx)("select",{name:"birthYear",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-51 rounded-md sm:text-sm focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",placeholder:"년도",value:m,onChange:e=>x(parseInt(e.target.value,10)),children:(0,c.Zj)()}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"년"}),(0,s.jsxs)("select",{name:"birthMonth",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-1/3 rounded-md sm:text-sm focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",value:h,onChange:e=>p(parseInt(e.target.value,10)),children:[(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"3",children:"3"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"5",children:"5"}),(0,s.jsx)("option",{value:"6",children:"6"}),(0,s.jsx)("option",{value:"7",children:"7"}),(0,s.jsx)("option",{value:"8",children:"8"}),(0,s.jsx)("option",{value:"9",children:"9"}),(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"11",children:"11"}),(0,s.jsx)("option",{value:"12",children:"12"})]}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"월"}),(0,s.jsx)("select",{name:"birthDay",className:"px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-main-theme focus:ring-main-theme block w-1/3 rounded-md sm:text-sm focus:ring-1 max-md:text-sm max-md:h-9 max-md:px-2 max-md:py-1.5",value:f,onChange:e=>g(parseInt(e.target.value,10)),children:(0,c.DD)(m,h)}),(0,s.jsx)("p",{className:" py-2 max-md:text-sm ",children:"일"})]})]}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold py-2 px-4 rounded w-80 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"submit",children:"정보 수정"})]})})})})}function v(e){let{onClickClose:t}=e,[a,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(1),[m,c]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),g=e=>{m.includes(e)?c(m.filter(t=>t!==e)):c([...m,e])},b=()=>{u.Z.post("/favors",{foodIds:m}).then(()=>{alert("선호하는 음식이 저장되었습니다!"),t()}).catch(()=>{alert("오류가 발생하였습니다.")})};return(0,r.useEffect)(()=>{u.Z.get("/foods/random").then(e=>{n(e.data.response.foods)}).catch(e=>{alert(e.response.data.errorMessage)})},[]),(0,s.jsx)(o.Z,{onClickClose:t,description:"선호 하는 음식들을 선택해주세요.",children:(0,s.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[(0,s.jsx)("div",{className:"flex flex-wrap justify-between mx-9 max-md:mx-6",children:a.filter((e,t)=>{let a=(i-1)*6;return a<=t&&t<a+6}).map(e=>(0,s.jsx)("button",{className:"mb-9 max-md:mb-5",type:"button",onClick:()=>g(e.id),children:(0,s.jsxs)("div",{className:"".concat(m.includes(e.id)?"ring-4 ring-orange-500 ":""," rounded-md overflow-hidden relative"),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,s.jsx)(l(),{className:"w-[150px] h-[100px] max-md:w-[120px] max-md:h-[80px] ".concat(p&&x===e.id?"opacity-30":"opacity-100"),src:e.imageUrl,alt:e.name,width:150,height:100,onMouseEnter:()=>h(e.id),onMouseLeave:()=>h(null)}),p&&x===e.id&&(0,s.jsxs)("div",{className:"absolute bg-inherit rounded text-center opacity-100 inset-0 m-auto w-fit h-fit font-bold max-md:text-sm",onMouseEnter:()=>h(e.id),children:[e.name," "]})]})},e.id))}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)("button",{type:"button",onClick:()=>{5===i?b():d(i+1)},className:"w-80 h-12 p-2 bg-orange-400 hover:bg-main-theme font-semibold text-white rounded-md mb-1 max-md:w-64 max-md:h-10 max-md:font-normal",children:["Continue(",i,"/5)"]})})]})})}function j(e){let{onClickClose:t,setFindUserPasswordModalOpened:a,setLoginModalOpened:n}=e,[l,d]=(0,r.useState)({email:""}),[m,x]=(0,r.useState)({email:""}),[h,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),v=e=>{let{name:t,value:a}=e.target;d(e=>({...e,[t]:a}))},j=async()=>{let e={...m},t=!0;return""===l.email.trim()?(e.email="이메일을 입력해주세요.",t=!1):/^[\w.%+-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(l.email)?l.email.length>100?(e.email="이메일은 최대 100자 이하여야 합니다.",t=!1):e.email="":(e.email="올바른 이메일 주소를 입력해주세요.",t=!1),x(t=>({...t,email:e.email})),t},C=async()=>await j()&&!0,y=async e=>{if(e.preventDefault(),!await C()){alert("입력하신 정보를 확인해주세요");return}let t={email:l.email};u.Z.post("/help/loginId",t).then(e=>{p("회원님의 아이디는 '".concat(e.data.response.loginId,"' 입니다.")),g(!0),w(!0)}).catch(e=>{alert(e.response.data.errorMessage)})};return(0,s.jsx)(o.Z,{onClickClose:t,children:(0,s.jsx)("div",{className:"p-5 h-0 grow max-md:p-3",children:(0,s.jsx)("form",{className:"overflow-y-scroll custom-scroll-bar-10px max-h-full -mr-[10px] max-md:custom-scroll-bar-4px max-md:-mr-[4px]",onSubmit:y,children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"이메일",type:"text",name:"email",placeholder:"가입하신 이메일을 입력해주세요.",required:!0,onChange:e=>{(0,c.kT)(e,100),v(e)},onBlur:()=>j(),error:m.email,autoComplete:"email",message:h,disabled:f}),(0,s.jsx)("button",{className:"".concat(f?"invisible h-0 p-0 ":"visible h-12 p-2 max-md:h-10"," bg-orange-400 hover:bg-main-theme text-white font-semibold rounded w-80 max-md:w-64 max-md:font-normal"),type:"submit",children:"아이디 찾기"}),(0,s.jsxs)("div",{className:"".concat(b?"visble":"invisible"," flex gap-2 max-md:flex-col"),children:[(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-40 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"button",onClick:()=>{n(!0),t()},children:"로그인 하기"}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-40 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"button",onClick:()=>{a(!0),t()},children:"비밀번호 초기화"})]})]})})})})}function C(e){let{onClickClose:t,setLoginModalOpened:a}=e,[n,l]=(0,r.useState)({loginId:"",email:""}),[d,m]=(0,r.useState)({loginId:"",email:""}),x=e=>{let{name:t,value:a}=e.target;l(e=>({...e,[t]:a}))},h=async()=>{let e={...d},t=!0;return""===n.loginId.trim()?(e.loginId="아이디를 입력해주세요.",t=!1):e.loginId="",m(t=>({...t,loginId:e.loginId})),t},p=async()=>{let e={...d},t=!0;return""===n.email.trim()?(e.email="이메일을 입력해주세요.",t=!1):/^[\w.%+-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(n.email)?n.email.length>100?(e.email="이메일은 최대 100자 이하여야 합니다.",t=!1):e.email="":(e.email="올바른 이메일 주소를 입력해주세요.",t=!1),m(t=>({...t,email:e.email})),t},f=async()=>{let e=!0;return e=await p()&&e,e=await h()&&e},g=async e=>{if(e.preventDefault(),!await f()){alert("입력하신 정보를 확인해주세요");return}let s={loginId:n.loginId,email:n.email};confirm("비밀번호를 초기화 하시겠습니까?\n초기화된 비밀번호는 아이디와 연동된 이메일로 전송됩니다.\n전송된 비밀번호로 로그인 후 비밀번호를 변경해주세요.")&&u.Z.post("/help/password",s,void 0).then(()=>{alert("비밀번호가 초기화 되었습니다.\n이메일을 확인해주세요."),t(),a(!0)}).catch(()=>{alert("입력하신 정보를 확인해주세요")})};return(0,s.jsx)(o.Z,{onClickClose:t,children:(0,s.jsx)("div",{className:"p-5 h-0 grow max-md:p-3",children:(0,s.jsx)("form",{className:"overflow-y-scroll custom-scroll-bar-10px max-h-full -mr-[10px] max-md:custom-scroll-bar-4px max-md:-mr-[4px]",onSubmit:g,children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(i,{label:"아이디",type:"text",name:"loginId",placeholder:"아이디를 입력하세요",required:!0,onChange:e=>{(0,c.kT)(e,40),x(e)},onBlur:()=>h(),error:d.loginId,autoComplete:"username"}),(0,s.jsx)(i,{label:"이메일",type:"text",name:"email",placeholder:"가입하신 이메일을 입력해주세요.",required:!0,onChange:e=>{(0,c.kT)(e,100),x(e)},onBlur:()=>p(),error:d.email,autoComplete:"email"}),(0,s.jsx)("button",{className:"bg-orange-400 hover:bg-main-theme text-white font-semibold p-2 rounded w-80 h-12 max-md:w-64 max-md:h-10 max-md:font-normal",type:"submit",children:"비밀번호 초기화"})]})})})})}function y(){let{userId:e,isLoad:t,userRole:a}=(0,r.useContext)(d.AuthContext),[n,o]=(0,r.useState)(!1),[i,m]=(0,r.useState)(!1),[c,f]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[k,I]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),[Z,L]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),[M,A]=(0,r.useState)(!1),[P,z]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{0!==e&&u.Z.get("/users/".concat(e)).then(e=>{D(e.data.response.name),"ROLE_USER"===a&&0===e.data.response.favors.length&&E(!0)})},[e,a]),(0,r.useEffect)(()=>{t&&(0!==e&&"ROLE_PENDING"===a?f(!0):0!==e&&"ROLE_USER"===a&&f(!1))},[t,e,a]),(0,s.jsx)("div",{className:"flex flex-wrap justify-end items-center h-min relative",children:t?0!==e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"flex flex-row gap-3 max-md:gap-0 items-center h-11 w-[180px] max-lg:w-[160px] max-md:w-7 max-md:h-7 max-md:p-0 p-2 max-md:mr-4 mr-9 rounded overflow-hidden hover:bg-gray-200 transition-all duration-300 ".concat(k?"bg-gray-200":""),onClick:()=>{I(!k)},type:"button",children:[(0,s.jsx)(l(),{className:"shrink-0 rounded-sm",src:"/svg/user.svg",alt:"user",width:28,height:28}),(0,s.jsx)("p",{className:"text-left font-semibold w-[calc(100%-68px)] h-full overflow-hidden max-md:invisible max-md:w-0",children:_}),(0,s.jsx)(l(),{className:"shrink-0 max-md:w-0 max-md:invisible",src:"/svg/dots.svg",alt:"dots",width:24,height:24})]}),y?(0,s.jsx)(g,{onClickClose:()=>N(!1),onClickEditEmail:()=>f(!0),onClickEditProfile:()=>L(!0)}):null,Z?(0,s.jsx)(w,{onClickClose:()=>L(!1),setUserName:D}):null,c?(0,s.jsx)(x,{onClickClose:()=>f(!1)}):null,S?(0,s.jsx)(v,{onClickClose:()=>E(!1)}):null,(0,s.jsx)(b,{isOpened:k,setIsOpened:I,setPreferenceModalOpened:E,setProfileModalOpened:N})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"flex items-center justify-center mr-16 max-md:mr-4 bg-orange-400 hover:bg-main-theme text-white rounded hover:cursor-pointer font-semibold",onClick:()=>o(!0),children:(0,s.jsx)("p",{className:"text-sm mx-2.5 my-2 max-md:mx-1.5 max-md:my-1.5 text-center max-md:text-xs",children:"로그인"})}),n?(0,s.jsx)(h,{onClickClose:()=>o(!1),onClickJoin:()=>{o(!1),m(!0)},onClickFindId:()=>{o(!1),A(!0)},onClickFindPassword:()=>{o(!1),z(!0)}}):null,i?(0,s.jsx)(p,{onClickClose:()=>m(!1)}):null,M?(0,s.jsx)(j,{setFindUserPasswordModalOpened:z,setLoginModalOpened:o,onClickClose:()=>A(!1)}):null,P?(0,s.jsx)(C,{setLoginModalOpened:o,onClickClose:()=>z(!1)}):null]}):null})}},4323:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var s=a(7437),n=a(2265),l=a(1500);function r(){let[e,t]=(0,n.useState)(!0);return e&&(0,s.jsx)(l.Z,{onClickClose:()=>t(!1),description:"",children:(0,s.jsxs)("div",{className:"px-8 py-32 max-md:py-24 max-md:text-sm flex flex-col gap-3",children:[(0,s.jsx)("p",{className:"",children:"현재 foodie AI server는 비용 상의 문제로 운영되고 있지 않습니다."}),(0,s.jsx)("p",{children:"AI foodie와의 대화를 나누고 싶다면 개발자 이메일로 문의 부탁드립니다. 일정시간 foodie를 깨워드립니다!"}),(0,s.jsxs)("p",{children:["문의하기:"," ",(0,s.jsx)("a",{className:"text-blue-600 hover:text-blue-800",href:"jagaldol.dev@gmail.com",children:"jagaldol.dev@gmail.com"})]})]})})}},281:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),n=a(2265),l=a(1527),r=a(6691),o=a.n(r),i=a(9036),d=a(6244),m=a(2068),c=a(9402);function u(e){let{chatRoom:t,onEdit:a,onDelete:l,onClickInnerButton:r}=e,[m,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(t.title),{setChatroomId:p}=(0,n.useContext)(d.ChatroomContext),{userId:f,isLoad:g}=(0,n.useContext)(i.AuthContext),b=(0,n.useRef)(null),w=()=>{""!==x.trim()&&(h(x.trim()),a(t.id,x)),u(!1)},v=()=>{m||p(t.id)},j=e=>{var t;(null===(t=b.current)||void 0===t?void 0:t.contains(e.target))||u(!1)};return((0,n.useEffect)(()=>(document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}),[]),g)?0!==f?(0,s.jsxs)("div",{className:"flex items-center hover:bg-gray-100 border-t-gray-300 border-t text-sm max-md:text-xs font-bold text-left",ref:b,children:[(0,s.jsx)(o(),{src:"/svg/message.svg",alt:"message",height:"12",width:"12",className:"ml-3.5 mr-3.5"}),m?(0,s.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),onKeyDown:e=>{(0,c.Ot)(e,()=>w())},onBlur:w,className:"pl-[7px] my-[3px] py-2 rounded-md border border-gray-300 text-left outline-none focus-within:border-main-theme",style:{maxWidth:"150px",overflow:"hidden",whiteSpace:"nowrap"},autoFocus:!0}):(0,s.jsx)("button",{type:"button",onClick:()=>{v(),r()},className:"text-left flex-grow pl-2 bg-transparent border-none cursor-pointer py-3",style:{maxWidth:"150px",overflow:"hidden",whiteSpace:"nowrap"},children:t.title}),(0,s.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,s.jsx)(o(),{src:"/svg/pen.svg",alt:"chat",height:"12",width:"12",className:"ml-2 cursor-pointer",onClick:()=>u(!0)}),(0,s.jsx)(o(),{src:"/svg/delete.svg",alt:"chat",height:"11",width:"12",style:{height:"11px"},className:"ml-3  cursor-pointer",onClick:()=>l(t.id)})]})]}):void 0:null}function x(e){let{onClickInnerButton:t}=e,{userId:a,isLoad:l,userRole:r}=(0,n.useContext)(i.AuthContext),{chatroomId:o,setChatroomId:c,update:x}=(0,n.useContext)(d.ChatroomContext),[h,p]=(0,n.useState)([]),f=async()=>{let e=await m.Z.get("/chatrooms");null!==e.data.response.chatrooms&&p(e.data.response.chatrooms)},g=async(e,t)=>{try{f().then(()=>{}),await m.Z.put("/chatrooms/".concat(e),{title:t})}catch(e){alert("채팅방 제목 수정 도중 오류가 발생하였습니다.")}f().then(()=>{})},b=async e=>{e===o&&c(0);try{await m.Z.delete("/chatrooms/".concat(e))}catch(e){alert("채팅방 삭제 도중 오류가 발생하였습니다.")}f().then(()=>{})};return(0,n.useEffect)(()=>{0!==a&&"ROLE_PENDING"!==r?f().then(()=>{}):p([])},[o,a,r]),(0,n.useEffect)(()=>{0!==a&&"ROLE_PENDING"!==r&&f().then(()=>{})},[x,a,r]),l&&0!==a?(0,s.jsx)("div",{className:"grow flex flex-col",children:(0,s.jsx)("div",{className:"grow h-0",children:(0,s.jsx)("div",{className:"max-h-full overflow-x-hidden overflow-y-scroll custom-scroll-bar-6px -mr-[6px]",children:h.map(e=>(0,s.jsx)(u,{chatRoom:e,onEdit:g,onDelete:b,onClickInnerButton:t},e.id))})})}):null}function h(e){let{iconSrc:t,text:a,func:n}=e;return(0,s.jsxs)("button",{type:"button",className:"flex mt-7 max-md:mt-5 ml-2.5 items-center",onClick:n,children:[(0,s.jsx)(o(),{src:t,alt:"",height:"16",width:"16",style:{height:"16px"}}),(0,s.jsx)("p",{className:"ml-2 text-sm max-md:text-xs",children:a})]})}function p(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{iconSrc:"/svg/github.svg",text:"View in github",func:()=>{window.location.href="https://github.com/jagaldol/chat-foodie"}}),(0,s.jsx)(h,{iconSrc:"/svg/envelope-solid.svg",text:"chatfoodie2023@gmail.com",func:()=>{window.location.href="mailto:chatfoodie2023@gmail.com"}})]})}function f(e){let{onClickInnerButton:t}=e,{userId:a}=(0,n.useContext)(i.AuthContext),{setChatroomId:l}=(0,n.useContext)(d.ChatroomContext),r=async()=>{try{let e=await m.Z.post("/chatrooms");l(e.data.response.chatroomId)}catch(e){alert("오류가 발생하였습니다.")}};return(0,s.jsxs)("button",{type:"button",className:"h-full border-solid border grow border-gray-300 rounded hover:bg-gray-100 transition flex items-center",onClick:()=>{0!==a?r().then():window.location.href="/chat",t()},children:[(0,s.jsx)(o(),{src:"/svg/add.svg",alt:"add",height:"20",width:"20",className:"ml-4"}),(0,s.jsx)("p",{className:"ml-2 text-sm font-bold max-md:text-xs",children:"새로운 대화"})]})}function g(){let{userId:e,isLoad:t}=(0,n.useContext)(i.AuthContext),{setChatroomId:a,needUpdate:l}=(0,n.useContext)(d.ChatroomContext),r=async()=>{a(0);try{let e=await m.Z.get("/chatrooms");if(null===e.data.response.chatrooms)return;let{chatrooms:t}=e.data.response;await Promise.all(t.map(async e=>{await m.Z.delete("/chatrooms/".concat(e.id))}))}catch(e){alert("대화방 삭제 도중 오류가 발생하였습니다.")}l()};return t&&0!==e?(0,s.jsx)(h,{iconSrc:"/svg/delete-all.svg",text:"대화 전체 삭제",func:()=>{r().then()}}):null}function b(){let[e,t]=(0,n.useState)(!1),a=(0,n.useRef)(null),r=(0,n.useRef)(null),i=(0,l.useMediaQuery)({maxWidth:1024}),d=()=>{i&&t(!1)};return(0,n.useEffect)(()=>{let e=e=>{var s,n;let{target:l}=e;(null===(s=a.current)||void 0===s?void 0:s.contains(l))||(null===(n=r.current)||void 0===n?void 0:n.contains(l))||t(!1)};return i?(t(!1),window.addEventListener("click",e)):(t(!0),window.removeEventListener("click",e)),()=>window.removeEventListener("click",e)},[i]),(0,n.useEffect)(()=>{let e=()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{ref:a,className:"fixed left-0 h-full z-20 flex flex-col min-w-[288px] max-md:pb-5 max-md:pt-7 py-6 px-2.5 border-r-gray-200 border-r border-solid transition-all ease-in-out duration-300 bg-white ".concat(e?"translate-x-0":"-translate-x-full -mr-[288px]","\n      "),children:(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-8 max-md:mb-5 h-11 max-md:h-9 flex flex-row items-center justify-center gap-2",children:[(0,s.jsx)(f,{onClickInnerButton:d}),(0,s.jsx)("button",{type:"button",className:"drawer-close-button border border-gray-300 rounded h-full w-11 max-md:w-9 hover:bg-gray-100 transition flex items-center justify-center",onClick:()=>t(!1),children:(0,s.jsx)(o(),{src:"/svg/drawer.svg",alt:"drawer",height:"20",width:"20"})})]}),(0,s.jsx)("div",{className:"grow flex",children:(0,s.jsx)(x,{onClickInnerButton:d})}),(0,s.jsxs)("div",{className:"border-t-2 border-solid border-gray-400",children:[(0,s.jsx)(g,{}),(0,s.jsx)(p,{})]})]})}),(0,s.jsx)("div",{className:"fixed left-4 top-6 max-md:top-8 z-[15]",ref:r,children:(0,s.jsx)("button",{type:"button",className:"drawer-close-button border border-gray-300 rounded h-11 w-11 max-md:h-7 max-md:w-7 hover:bg-gray-100 transition flex items-center justify-center",onClick:()=>t(!0),children:(0,s.jsx)(o(),{src:"/svg/drawer.svg",alt:"drawer",height:"20",width:"20"})})})]})}},9036:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthContext:function(){return r},default:function(){return o}});var s=a(7437),n=a(2265),l=a(8814);let r=(0,n.createContext)({});function o(e){let{children:t}=e,[a,o]=(0,n.useState)(0),[i,d]=(0,n.useState)("ROLE_PENDING"),[m,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),h=(0,n.useMemo)(()=>({userId:a,setUserId:o,userRole:i,setUserRole:d,isLoad:m,needUpdate:()=>{x(e=>!e),c(!1)}}),[a,i,m]);return(0,n.useEffect)(()=>{let e=(0,l.ss)();null===e?(o(0),d("ROLE_PENDING"),(0,l.l6)()):(o(e.id),d(e.role)),c(!0)},[u]),(0,s.jsx)(r.Provider,{value:h,children:t})}},6244:function(e,t,a){"use strict";a.r(t),a.d(t,{ChatroomContext:function(){return l},default:function(){return r}});var s=a(7437),n=a(2265);let l=(0,n.createContext)({});function r(e){let{children:t}=e,[a,r]=(0,n.useState)(0),[o,i]=(0,n.useState)(!1),d=(0,n.useMemo)(()=>({chatroomId:a,setChatroomId:r,update:o,needUpdate:()=>{i(e=>!e)}}),[o,a]);return(0,s.jsx)(l.Provider,{value:d,children:t})}},8814:function(e,t,a){"use strict";function s(e){localStorage.setItem("jwt",e)}function n(){localStorage.removeItem("jwt")}function l(e){let t="";if(e)t=e;else{let e=localStorage.getItem("jwt");t=null!=e?e:t}if(null===t)return null;let a=t.split(".");if(!t.startsWith("Bearer ")||3!==a.length)return null;let s=atob(a[1]);return JSON.parse(s)}function r(e){let t=l(e);return t?t.exp:null}function o(e){let t=l(e);return t?t.id:null}function i(){return localStorage.getItem("jwt")}a.d(t,{He:function(){return i},LJ:function(){return s},Ld:function(){return r},l6:function(){return n},sk:function(){return o},ss:function(){return l}})},2068:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(9222),n=a(8814),l=a(2601);let r=!1,o=[],i=async e=>{let t=(0,n.Ld)();if(null!=t&&1e3*t<Date.now()){if(r)await new Promise(t=>{o.push(a=>{e.headers.Authorization=a,t(a)})});else try{r=!0;let t=await s.Z.post("".concat(l.env.NEXT_PUBLIC_API_URL,"/api/authentication"),null,{withCredentials:!0}),a=t.headers.authorization;(0,n.LJ)(a),o.forEach(e=>e(a)),o=[],e.headers.Authorization=a}catch(e){(0,n.l6)()}finally{r=!1}}else e.headers.Authorization=(0,n.He)();return e};var d=a(2601);let m=s.Z.create({baseURL:"".concat(d.env.NEXT_PUBLIC_API_URL,"/api"),withCredentials:!0});m.interceptors.request.use(i,()=>{});var c=m},9402:function(e,t,a){"use strict";a.d(t,{DD:function(){return o},Ot:function(){return l},Zj:function(){return i},kT:function(){return n}});var s=a(7437);function n(e,t){let{value:a}=e.target;a.length>t&&(e.target.value=a.slice(0,t))}function l(e,t){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t())}a(2265);let r={1:31,2:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31};function o(e,t){let a=2===t&&(e%4==0&&e%100!=0||e%400==0)?29:r[t],n=[];for(let e=1;e<=a;e+=1)n.push((0,s.jsx)("option",{value:e,children:e},e));return n}function i(){let e=[],t=new Date().getFullYear();for(let a=1900;a<=t;a+=1)e.push((0,s.jsx)("option",{value:a,children:a},a));return e}},2780:function(e){e.exports={style:{fontFamily:"'__Inter_d65c78', '__Inter_Fallback_d65c78'",fontStyle:"normal"},className:"__className_d65c78"}}},function(e){e.O(0,[222,357,971,596,744],function(){return e(e.s=770)}),_N_E=e.O()}]);